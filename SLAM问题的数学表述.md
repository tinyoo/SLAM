# SLAM问题的数学表述

* 相机通常在某些时刻采集数据，因此我们只关心这些时刻的位置和地图，设这些离散时刻为$t$ = 1，... ，K

* 在这些时刻，用$x$表示小萝卜（机器人）自身的位置，各时刻的位置记为***$x_1$***，... ，***$x_K$***，它们构成小萝卜的轨迹

* 假设地图由许多**路标**（ Landmark）组成，每个时刻，传感器会测量到一部分路标点，得到它们的观测数据。设有N 个路标点***$y_1$***，... ，***$y_N$***。

* **运动方程**
$$
  x_k = f(x_{k-1},u_k,w_k)
  $$
  
  - $u_k$是运动传感器的读数（输入）
  - $w_k$为噪声

* **观测方程**：当小萝卜在$x_k$位置上看到某个路标点$y_j$，产生了一个观测数据$z_{k,j}$。
  $$
  z_{k,j} = h(y_j,x_k,v_{k,j})
  $$

  - $v_{k,j}$是观测里的噪声

- 参数化（ Parameterization ）

  - e.g. 小萝卜在平面内运动，位姿由两个位置和一个转角来描述：$x_k=[x,y,\theta]_k^T$。

  - 同时，运动传感器能测量到小萝卜在任意两个时间间隔位置和转角的变化量$u_k=[\Delta x,\Delta y,\Delta \theta]_k^T$。

  - 此时运动方程可以具体化：
    $$
    \left[
    \matrix{
    	x\\
    	y\\
    	\theta
    }
    \right]_k
    =\left[
    \matrix{
    	x\\
    	y\\
    	\theta
    }
    \right]_{k-1}
    +\left[
    \matrix{
    	\Delta x\\
    	\Delta y\\
    	\Delta \theta
    }
    \right]_k
    +w_k
    $$
    ​                                            ( k时刻的位姿=前一时刻的位姿+变化的位姿+噪声 )

  - 激光传感器观测一个2D路标点时能测量到两个量：路标点与小萝卜之间的距离$r$和夹角$\phi$。

  - 路标点为$y=[p_x,p_y]^T$（省略了下标），观测数据为$z=[r,\phi]^T$。

  - 此时观测方程可以具体化：
    $$
    \left[
    \matrix{
    	r\\
    	\phi
    }
    \right]
    =\left[
    \matrix{
    	\sqrt{(p_x-x)^2+(p_y-y)^2}\\
    	\arctan(\frac{p_y-y}{p_x-x})
    }
    \right]
    +v
    $$

- SLAM过程总结为两个基本方程
  $$
  \begin{cases} x_k=f(x_{k-1},u_k,w_k)\\ z_{k,j}=h(y_j,x_k,v_{k,j})\end{cases}
  $$

- 小萝卜是三维空间中的机器人，三维空间的运动由3个轴构成，小萝卜的运动要由3个轴上的平移以及绕着3个轴的旋转来描述，共6个自由度。